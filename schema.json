{
  "name": "tree-table",
  "type": "registry:block",
  "dependencies": [
    "@radix-ui/react-accordion",
    "class-variance-authority",
    "lucide-react",
    "clsx",
    "tailwind-merge"
  ],
  "devDependencies": [],
  "registryDependencies": [],
  "files": [
    {
      "path": "components/ui/tree-view.tsx",
      "type": "registry:block",
      "content": "'use client'\n\nimport React from 'react'\nimport * as AccordionPrimitive from '@radix-ui/react-accordion'\nimport { ChevronRight } from 'lucide-react'\nimport { cva } from 'class-variance-authority'\nimport { cn } from '@/lib/utils'\n\nconst treeVariants = cva(\n    'group hover:before:opacity-100 before:absolute before:rounded-lg before:left-0 px-2 before:w-full before:opacity-0 before:bg-accent/70 before:h-[2rem] before:-z-10'\n)\n\nconst selectedTreeVariants = cva(\n    'before:opacity-100 before:bg-accent/70 text-accent-foreground'\n)\n\nconst dragOverVariants = cva(\n    'before:opacity-100 before:bg-primary/20 text-primary-foreground'\n)\n\ninterface TreeDataItem {\n    id: string\n    name: string\n    icon?: any\n    selectedIcon?: any\n    openIcon?: any\n    children?: TreeDataItem[]\n    actions?: React.ReactNode\n    onClick?: () => void\n    draggable?: boolean\n    droppable?: boolean\n    disabled?: boolean\n}\n\ntype TreeRenderItemParams = {\n    item: TreeDataItem\n    level: number\n    isLeaf: boolean\n    isSelected: boolean\n    isOpen?: boolean\n    hasChildren: boolean\n}\n\ntype TreeProps = React.HTMLAttributes<HTMLDivElement> & {\n    data: TreeDataItem[] | TreeDataItem\n    initialSelectedItemId?: string\n    onSelectChange?: (item: TreeDataItem | undefined) => void\n    expandAll?: boolean\n    defaultNodeIcon?: any\n    defaultLeafIcon?: any\n    onDocumentDrag?: (sourceItem: TreeDataItem, targetItem: TreeDataItem) => void\n    renderItem?: (params: TreeRenderItemParams) => React.ReactNode\n}\n\nconst TreeView = React.forwardRef<HTMLDivElement, TreeProps>(\n    (\n        {\n            data,\n            initialSelectedItemId,\n            onSelectChange,\n            expandAll,\n            defaultLeafIcon,\n            defaultNodeIcon,\n            className,\n            onDocumentDrag,\n            renderItem,\n            ...props\n        },\n        ref\n    ) => {\n        const [selectedItemId, setSelectedItemId] = React.useState<\n            string | undefined\n        >(initialSelectedItemId)\n        \n        const [draggedItem, setDraggedItem] = React.useState<TreeDataItem | null>(null)\n\n        const handleSelectChange = React.useCallback(\n            (item: TreeDataItem | undefined) => {\n                setSelectedItemId(item?.id)\n                if (onSelectChange) {\n                    onSelectChange(item)\n                }\n            },\n            [onSelectChange]\n        )\n\n        const handleDragStart = React.useCallback((item: TreeDataItem) => {\n            setDraggedItem(item)\n        }, [])\n\n        const handleDrop = React.useCallback((targetItem: TreeDataItem) => {\n            if (draggedItem && onDocumentDrag && draggedItem.id !== targetItem.id) {\n                onDocumentDrag(draggedItem, targetItem)\n            }\n            setDraggedItem(null)\n        }, [draggedItem, onDocumentDrag])\n\n        const expandedItemIds = React.useMemo(() => {\n            if (!initialSelectedItemId) {\n                return [] as string[]\n            }\n\n            const ids: string[] = []\n\n            function walkTreeItems(\n                items: TreeDataItem[] | TreeDataItem,\n                targetId: string\n            ) {\n                if (items instanceof Array) {\n                    for (let i = 0; i < items.length; i++) {\n                        ids.push(items[i]!.id)\n                        if (walkTreeItems(items[i]!, targetId) && !expandAll) {\n                            return true\n                        }\n                        if (!expandAll) ids.pop()\n                    }\n                } else if (!expandAll && items.id === targetId) {\n                    return true\n                } else if (items.children) {\n                    return walkTreeItems(items.children, targetId)\n                }\n            }\n\n            walkTreeItems(data, initialSelectedItemId)\n            return ids\n        }, [data, expandAll, initialSelectedItemId])\n\n        return (\n            <div className={cn('overflow-hidden relative p-2', className)}>\n                <TreeItem\n                    data={data}\n                    ref={ref}\n                    selectedItemId={selectedItemId}\n                    handleSelectChange={handleSelectChange}\n                    expandedItemIds={expandedItemIds}\n                    defaultLeafIcon={defaultLeafIcon}\n                    defaultNodeIcon={defaultNodeIcon}\n                    handleDragStart={handleDragStart}\n                    handleDrop={handleDrop}\n                    draggedItem={draggedItem}\n                    renderItem={renderItem}\n                    level={0}\n                    {...props}\n                />\n                <div\n                    className='w-full h-[48px]'\n                    onDrop={(e) => { handleDrop({id: '', name: 'parent_div'})}}>\n\n                </div>\n            </div>\n        )\n    }\n)\nTreeView.displayName = 'TreeView'\n\ntype TreeItemProps = TreeProps & {\n    selectedItemId?: string\n    handleSelectChange: (item: TreeDataItem | undefined) => void\n    expandedItemIds: string[]\n    defaultNodeIcon?: any\n    defaultLeafIcon?: any\n    handleDragStart?: (item: TreeDataItem) => void\n    handleDrop?: (item: TreeDataItem) => void\n    draggedItem: TreeDataItem | null\n    level?: number\n}\n\nconst TreeItem = React.forwardRef<HTMLDivElement, TreeItemProps>(\n    (\n        {\n            className,\n            data,\n            selectedItemId,\n            handleSelectChange,\n            expandedItemIds,\n            defaultNodeIcon,\n            defaultLeafIcon,\n            handleDragStart,\n            handleDrop,\n            draggedItem,\n            renderItem,\n            level,\n            onSelectChange,\n            expandAll,\n            initialSelectedItemId,\n            onDocumentDrag,\n            ...props\n        },\n        ref\n    ) => {\n        if (!(data instanceof Array)) {\n            data = [data]\n        }\n        return (\n            <div ref={ref} role=\"tree\" className={className} {...props}>\n                <ul>\n                    {data.map((item) => (\n                        <li key={item.id}>\n                            {item.children ? (\n                                <TreeNode\n                                    item={item}\n                                    level={level ?? 0}\n                                    selectedItemId={selectedItemId}\n                                    expandedItemIds={expandedItemIds}\n                                    handleSelectChange={handleSelectChange}\n                                    defaultNodeIcon={defaultNodeIcon}\n                                    defaultLeafIcon={defaultLeafIcon}\n                                    handleDragStart={handleDragStart}\n                                    handleDrop={handleDrop}\n                                    draggedItem={draggedItem}\n                                    renderItem={renderItem}\n                                />\n                            ) : (\n                                <TreeLeaf\n                                    item={item}\n                                    level={level ?? 0}\n                                    selectedItemId={selectedItemId}\n                                    handleSelectChange={handleSelectChange}\n                                    defaultLeafIcon={defaultLeafIcon}\n                                    handleDragStart={handleDragStart}\n                                    handleDrop={handleDrop}\n                                    draggedItem={draggedItem}\n                                    renderItem={renderItem}\n                                />\n                            )}\n                        </li>\n                    ))}\n                </ul>\n            </div>\n        )\n    }\n)\nTreeItem.displayName = 'TreeItem'\n\nconst TreeNode = ({\n    item,\n    handleSelectChange,\n    expandedItemIds,\n    selectedItemId,\n    defaultNodeIcon,\n    defaultLeafIcon,\n    handleDragStart,\n    handleDrop,\n    draggedItem,\n    renderItem,\n    level = 0,\n}: {\n    item: TreeDataItem\n    handleSelectChange: (item: TreeDataItem | undefined) => void\n    expandedItemIds: string[]\n    selectedItemId?: string\n    defaultNodeIcon?: any\n    defaultLeafIcon?: any\n    handleDragStart?: (item: TreeDataItem) => void\n    handleDrop?: (item: TreeDataItem) => void\n    draggedItem: TreeDataItem | null\n    renderItem?: (params: TreeRenderItemParams) => React.ReactNode\n    level?: number\n}) => {\n    const [value, setValue] = React.useState(\n        expandedItemIds.includes(item.id) ? [item.id] : []\n    )\n    const [isDragOver, setIsDragOver] = React.useState(false)\n    const hasChildren = !!item.children?.length\n    const isSelected = selectedItemId === item.id\n    const isOpen = value.includes(item.id)\n\n    const onDragStart = (e: React.DragEvent) => {\n        if (!item.draggable) {\n            e.preventDefault()\n            return\n        }\n        e.dataTransfer.setData('text/plain', item.id)\n        handleDragStart?.(item)\n    }\n\n    const onDragOver = (e: React.DragEvent) => {\n        if (item.droppable !== false && draggedItem && draggedItem.id !== item.id) {\n            e.preventDefault()\n            setIsDragOver(true)\n        }\n    }\n\n    const onDragLeave = () => {\n        setIsDragOver(false)\n    }\n\n    const onDrop = (e: React.DragEvent) => {\n        e.preventDefault()\n        setIsDragOver(false)\n        handleDrop?.(item)\n    }\n\n    return (\n        <AccordionPrimitive.Root\n            type=\"multiple\"\n            value={value}\n            onValueChange={(s) => setValue(s)}\n        >\n            <AccordionPrimitive.Item value={item.id}>\n                <AccordionTrigger\n                    className={cn(\n                        treeVariants(),\n                        isSelected && selectedTreeVariants(),\n                        isDragOver && dragOverVariants()\n                    )}\n                    onClick={() => {\n                        handleSelectChange(item)\n                        item.onClick?.()\n                    }}\n                    draggable={!!item.draggable}\n                    onDragStart={onDragStart}\n                    onDragOver={onDragOver}\n                    onDragLeave={onDragLeave}\n                    onDrop={onDrop}\n                >\n                    {renderItem ? (\n                        renderItem({\n                            item,\n                            level,\n                            isLeaf: false,\n                            isSelected,\n                            isOpen,\n                            hasChildren,\n                        })\n                    ) : (\n                        <>\n                            <TreeIcon\n                                item={item}\n                                isSelected={isSelected}\n                                isOpen={isOpen}\n                                default={defaultNodeIcon}\n                            />\n                            <span className=\"text-sm truncate\">{item.name}</span>\n                            <TreeActions isSelected={isSelected}>\n                                {item.actions}\n                            </TreeActions>\n                        </>\n                    )}\n                </AccordionTrigger>\n                <AccordionContent className=\"ml-4 pl-1 border-l\">\n                    <TreeItem\n                        data={item.children ? item.children : item}\n                        selectedItemId={selectedItemId}\n                        handleSelectChange={handleSelectChange}\n                        expandedItemIds={expandedItemIds}\n                        defaultLeafIcon={defaultLeafIcon}\n                        defaultNodeIcon={defaultNodeIcon}\n                        handleDragStart={handleDragStart}\n                        handleDrop={handleDrop}\n                        draggedItem={draggedItem}\n                        renderItem={renderItem}\n                        level={level + 1}\n                    />\n                </AccordionContent>\n            </AccordionPrimitive.Item>\n        </AccordionPrimitive.Root>\n    )\n}\n\nconst TreeLeaf = React.forwardRef<\n    HTMLDivElement,\n    React.HTMLAttributes<HTMLDivElement> & {\n        item: TreeDataItem\n        level: number\n        selectedItemId?: string\n        handleSelectChange: (item: TreeDataItem | undefined) => void\n        defaultLeafIcon?: any\n        handleDragStart?: (item: TreeDataItem) => void\n        handleDrop?: (item: TreeDataItem) => void\n        draggedItem: TreeDataItem | null\n        renderItem?: (params: TreeRenderItemParams) => React.ReactNode\n    }\n>(\n    (\n        {\n            className,\n            item,\n            level,\n            selectedItemId,\n            handleSelectChange,\n            defaultLeafIcon,\n            handleDragStart,\n            handleDrop,\n            draggedItem,\n            renderItem,\n            ...props\n        },\n        ref\n    ) => {\n        const [isDragOver, setIsDragOver] = React.useState(false)\n        const isSelected = selectedItemId === item.id\n\n        const onDragStart = (e: React.DragEvent) => {\n            if (!item.draggable || item.disabled) {\n                e.preventDefault()\n                return\n            }\n            e.dataTransfer.setData('text/plain', item.id)\n            handleDragStart?.(item)\n        }\n\n        const onDragOver = (e: React.DragEvent) => {\n            if (item.droppable !== false && !item.disabled && draggedItem && draggedItem.id !== item.id) {\n                e.preventDefault()\n                setIsDragOver(true)\n            }\n        }\n\n        const onDragLeave = () => {\n            setIsDragOver(false)\n        }\n\n        const onDrop = (e: React.DragEvent) => {\n            if (item.disabled) return\n            e.preventDefault()\n            setIsDragOver(false)\n            handleDrop?.(item)\n        }\n\n        return (\n            <div\n                ref={ref}\n                className={cn(\n                    'ml-5 flex text-left items-center py-2 cursor-pointer before:right-1',\n                    treeVariants(),\n                    className,\n                    isSelected && selectedTreeVariants(),\n                    isDragOver && dragOverVariants(),\n                    item.disabled && 'opacity-50 cursor-not-allowed pointer-events-none'\n                )}\n                onClick={() => {\n                    if (item.disabled) return\n                    handleSelectChange(item)\n                    item.onClick?.()\n                }}\n                draggable={!!item.draggable && !item.disabled}\n                onDragStart={onDragStart}\n                onDragOver={onDragOver}\n                onDragLeave={onDragLeave}\n                onDrop={onDrop}\n                {...props}\n            >\n                {renderItem ? (\n                    <>\n                        {/* 占位元素，与 ChevronRight 相同尺寸，保持对齐 */}\n                        <div className=\"h-4 w-4 shrink-0 mr-1\" />\n                        {renderItem({\n                            item,\n                            level,\n                            isLeaf: true,\n                            isSelected,\n                            hasChildren: false,\n                        })}\n                    </>\n                ) : (\n                    <>\n                        <TreeIcon\n                            item={item}\n                            isSelected={isSelected}\n                            default={defaultLeafIcon}\n                        />\n                        <span className=\"flex-grow text-sm truncate\">{item.name}</span>\n                        <TreeActions isSelected={isSelected && !item.disabled}>\n                            {item.actions}\n                        </TreeActions>\n                    </>\n                )}\n            </div>\n        )\n    }\n)\nTreeLeaf.displayName = 'TreeLeaf'\n\nconst AccordionTrigger = React.forwardRef<\n    React.ElementRef<typeof AccordionPrimitive.Trigger>,\n    React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n    <AccordionPrimitive.Header>\n        <AccordionPrimitive.Trigger\n            ref={ref}\n            className={cn(\n                'flex flex-1 w-full items-center py-2 transition-all first:[&[data-state=open]>svg]:first-of-type:rotate-90',\n                className\n            )}\n            {...props}\n        >\n            <ChevronRight className=\"h-4 w-4 shrink-0 transition-transform duration-200 text-accent-foreground/50 mr-1\" />\n            {children}\n        </AccordionPrimitive.Trigger>\n    </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n    React.ElementRef<typeof AccordionPrimitive.Content>,\n    React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n    <AccordionPrimitive.Content\n        ref={ref}\n        className={cn(\n            'overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down',\n            className\n        )}\n        {...props}\n    >\n        <div className=\"pb-1 pt-0\">{children}</div>\n    </AccordionPrimitive.Content>\n))\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nconst TreeIcon = ({\n    item,\n    isOpen,\n    isSelected,\n    default: defaultIcon\n}: {\n    item: TreeDataItem\n    isOpen?: boolean\n    isSelected?: boolean\n    default?: any\n}) => {\n    let Icon = defaultIcon\n    if (isSelected && item.selectedIcon) {\n        Icon = item.selectedIcon\n    } else if (isOpen && item.openIcon) {\n        Icon = item.openIcon\n    } else if (item.icon) {\n        Icon = item.icon\n    }\n    return Icon ? (\n        <Icon className=\"h-4 w-4 shrink-0 mr-2\" />\n    ) : (\n        <></>\n    )\n}\n\nconst TreeActions = ({\n    children,\n    isSelected\n}: {\n    children: React.ReactNode\n    isSelected: boolean\n}) => {\n    return (\n        <div\n            className={cn(\n                isSelected ? 'block' : 'hidden',\n                'absolute right-3 group-hover:block'\n            )}\n        >\n            {children}\n        </div>\n    )\n}\n\nexport { \n    TreeView, \n    type TreeDataItem, \n    type TreeRenderItemParams,\n    AccordionTrigger,\n    AccordionContent,\n    TreeLeaf,\n    TreeNode,\n    TreeItem\n}\n"
    },
    {
      "path": "components/ui/tree-table.tsx",
      "type": "registry:block",
      "content": "'use client'\n\nimport React, {\n    useCallback,\n    useEffect,\n    useLayoutEffect,\n    useMemo,\n    useRef,\n    useState,\n} from 'react'\nimport * as AccordionPrimitive from '@radix-ui/react-accordion'\nimport { ChevronRight } from 'lucide-react'\nimport { cva } from 'class-variance-authority'\nimport { cn } from '@/lib/utils'\nimport { \n    TreeView as BaseTreeView,\n    TreeItem as BaseTreeItem,\n    type TreeDataItem,\n    type TreeRenderItemParams\n} from './tree-view'\n\n// Tree-table specific styling variants\nconst treeVariants = cva(\n    'group hover:before:opacity-100 before:absolute before:rounded-lg before:left-0 before:w-full before:opacity-0 before:h-[2rem] before:-z-10'\n    // Notion 風格：hover 時使用淺灰色背景\n    // 移除 px-2 以避免影響欄位對齊\n)\n\nconst selectedTreeVariants = cva(\n    'before:opacity-100 text-white'\n    // Notion 風格：選中時使用藍色背景\n)\n\nconst dragOverVariants = cva(\n    'before:opacity-100 text-white'\n    // Notion 風格：拖放時使用藍色背景\n)\n\nconst rowSurfaceClasses =\n    'relative cursor-pointer transition-colors hover:bg-white/5 data-[selected=true]:bg-[rgba(46,170,220,0.3)] data-[drag-over=true]:bg-[rgba(46,170,220,0.2)]'\n\n// Tree-table specific AccordionTrigger with level-based positioning\nconst AccordionTrigger = React.forwardRef<\n    React.ElementRef<typeof AccordionPrimitive.Trigger>,\n    React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger> & {\n        level?: number\n        isSelected?: boolean\n        isDragOver?: boolean\n        isOpen?: boolean\n    }\n>(({ className, children, level = 0, isSelected, isDragOver, isOpen, ...props }, ref) => {\n    // ChevronRight 使用 absolute positioning，位置根據 level 動態調整\n    // 基礎位置：10px（左側間距）+ level * 20px（縮排，每層增加 20px）\n    const chevronLeft = 10 + level * 20\n    \n    const selectedAttr = isSelected ? 'true' : 'false'\n    const dragAttr = isDragOver ? 'true' : 'false'\n    const chevronAttr = isOpen ? 'true' : 'false'\n    const chevronTransform = isOpen\n        ? 'translateY(-50%) rotate(90deg)'\n        : 'translateY(-50%)'\n\n    return (\n        <AccordionPrimitive.Header style={{ width: '100%', position: 'relative' }}>\n            <AccordionPrimitive.Trigger\n                ref={ref}\n                className={cn(\n                    `group flex items-center py-2 transition-all ${rowSurfaceClasses}`,\n                    className\n                )}\n                style={{ color: 'rgb(232, 232, 231)', width: '100%', minWidth: 0, overflow: 'hidden', paddingLeft: 0, paddingRight: 0, position: 'relative' }}\n                data-selected={selectedAttr}\n                data-drag-over={dragAttr}\n                {...props}\n            >\n                {/* 左側間距，保持固定 10px */}\n                <div style={{ width: '10px', flexShrink: 0 }} />\n                {/* ChevronRight 使用 absolute positioning，根據 level 動態調整位置 */}\n                <ChevronRight \n                    className=\"h-4 w-4 shrink-0 transition-transform duration-200 chevron-icon\" \n                    data-open={chevronAttr}\n                    style={{ \n                        color: 'rgb(156, 156, 155)', \n                        position: 'absolute',\n                        left: `${chevronLeft}px`,\n                        top: '50%',\n                        transform: chevronTransform,\n                        flexShrink: 0 \n                    }} \n                />\n                {/* renderItem 內容從固定位置開始（10px + 20px ChevronRight + 4px margin = 34px），確保所有層級寬度一致 */}\n                <div style={{ marginLeft: '24px', flex: 1, minWidth: 0, overflow: 'hidden' }}>\n                    {children}\n                </div>\n            </AccordionPrimitive.Trigger>\n        </AccordionPrimitive.Header>\n    )\n})\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n    React.ElementRef<typeof AccordionPrimitive.Content>,\n    React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n    <AccordionPrimitive.Content\n        ref={ref}\n        className={cn(\n            'overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down',\n            className\n        )}\n        {...props}\n    >\n        <div className=\"pb-1 pt-0\">{children}</div>\n    </AccordionPrimitive.Content>\n))\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nconst TreeIcon = ({\n    item,\n    isOpen,\n    isSelected,\n    default: defaultIcon\n}: {\n    item: TreeDataItem\n    isOpen?: boolean\n    isSelected?: boolean\n    default?: any\n}) => {\n    let Icon = defaultIcon\n    if (isSelected && item.selectedIcon) {\n        Icon = item.selectedIcon\n    } else if (isOpen && item.openIcon) {\n        Icon = item.openIcon\n    } else if (item.icon) {\n        Icon = item.icon\n    }\n    return Icon ? (\n        <Icon className=\"h-4 w-4 shrink-0 mr-2\" />\n    ) : (\n        <></>\n    )\n}\n\nconst TreeActions = ({\n    children,\n    isSelected\n}: {\n    children: React.ReactNode\n    isSelected: boolean\n}) => {\n    return (\n        <div\n            className={cn(\n                isSelected ? 'block' : 'hidden',\n                'absolute right-3 group-hover:block'\n            )}\n        >\n            {children}\n        </div>\n    )\n}\n\n// Tree-table specific TreeNode\nconst TreeNode = ({\n    item,\n    handleSelectChange,\n    expandedItemIds,\n    selectedItemId,\n    defaultNodeIcon,\n    defaultLeafIcon,\n    handleDragStart,\n    handleDrop,\n    draggedItem,\n    renderItem,\n    level = 0,\n}: {\n    item: TreeDataItem\n    handleSelectChange: (item: TreeDataItem | undefined) => void\n    expandedItemIds: string[]\n    selectedItemId?: string\n    defaultNodeIcon?: any\n    defaultLeafIcon?: any\n    handleDragStart?: (item: TreeDataItem) => void\n    handleDrop?: (item: TreeDataItem) => void\n    draggedItem: TreeDataItem | null\n    renderItem?: (params: TreeRenderItemParams) => React.ReactNode\n    level?: number\n}) => {\n    const [value, setValue] = React.useState(\n        expandedItemIds.includes(item.id) ? [item.id] : []\n    )\n    const [isDragOver, setIsDragOver] = React.useState(false)\n    const hasChildren = !!item.children?.length\n    const isSelected = selectedItemId === item.id\n    const isOpen = value.includes(item.id)\n\n    const onDragStart = (e: React.DragEvent) => {\n        // 默認所有項目都可以拖動，除非明確設置 draggable: false\n        if (item.draggable === false) {\n            e.preventDefault()\n            return\n        }\n        e.dataTransfer.setData('text/plain', item.id)\n        handleDragStart?.(item)\n    }\n\n    const onDragOver = (e: React.DragEvent) => {\n        if (item.droppable !== false && draggedItem && draggedItem.id !== item.id) {\n            e.preventDefault()\n            setIsDragOver(true)\n        }\n    }\n\n    const onDragLeave = () => {\n        setIsDragOver(false)\n    }\n\n    const onDrop = (e: React.DragEvent) => {\n        e.preventDefault()\n        setIsDragOver(false)\n        handleDrop?.(item)\n    }\n\n    return (\n        <AccordionPrimitive.Root\n            type=\"multiple\"\n            value={value}\n            onValueChange={(s) => setValue(s)}\n        >\n            <AccordionPrimitive.Item value={item.id}>\n                <AccordionTrigger\n                    level={level}\n                    isSelected={isSelected}\n                    isDragOver={isDragOver}\n                    isOpen={isOpen}\n                    className={cn(\n                        treeVariants(),\n                        isSelected && selectedTreeVariants(),\n                        isDragOver && dragOverVariants()\n                    )}\n                    onClick={() => {\n                        handleSelectChange(item)\n                        item.onClick?.()\n                    }}\n                    draggable={item.draggable !== false}\n                    onDragStart={onDragStart}\n                    onDragOver={onDragOver}\n                    onDragLeave={onDragLeave}\n                    onDrop={onDrop}\n                >\n                    {renderItem ? (\n                        renderItem({\n                            item,\n                            level,\n                            isLeaf: false,\n                            isSelected,\n                            isOpen,\n                            hasChildren,\n                        })\n                    ) : (\n                        <>\n                            <TreeIcon\n                                item={item}\n                                isSelected={isSelected}\n                                isOpen={isOpen}\n                                default={defaultNodeIcon}\n                            />\n                            <span\n                                className=\"text-sm truncate\"\n                                style={{ color: 'rgb(232, 232, 231)' }}\n                            >\n                                {item.name}\n                            </span>\n                            <TreeActions isSelected={isSelected}>\n                                {item.actions}\n                            </TreeActions>\n                        </>\n                    )}\n                </AccordionTrigger>\n                <AccordionContent style={{ borderLeft: '1px solid rgb(47, 47, 47)' }}>\n                    <TreeItem\n                        data={item.children ? item.children : item}\n                        selectedItemId={selectedItemId}\n                        handleSelectChange={handleSelectChange}\n                        expandedItemIds={expandedItemIds}\n                        defaultLeafIcon={defaultLeafIcon}\n                        defaultNodeIcon={defaultNodeIcon}\n                        handleDragStart={handleDragStart}\n                        handleDrop={handleDrop}\n                        draggedItem={draggedItem}\n                        renderItem={renderItem}\n                        level={level + 1}\n                    />\n                </AccordionContent>\n            </AccordionPrimitive.Item>\n        </AccordionPrimitive.Root>\n    )\n}\n\n// Tree-table specific TreeLeaf with spacing divs\nconst TreeLeaf = React.forwardRef<\n    HTMLDivElement,\n    React.HTMLAttributes<HTMLDivElement> & {\n        item: TreeDataItem\n        level: number\n        selectedItemId?: string\n        handleSelectChange: (item: TreeDataItem | undefined) => void\n        defaultLeafIcon?: any\n        handleDragStart?: (item: TreeDataItem) => void\n        handleDrop?: (item: TreeDataItem) => void\n        draggedItem: TreeDataItem | null\n        renderItem?: (params: TreeRenderItemParams) => React.ReactNode\n    }\n>(\n    (\n        {\n            className,\n            item,\n            level,\n            selectedItemId,\n            handleSelectChange,\n            defaultLeafIcon,\n            handleDragStart,\n            handleDrop,\n            draggedItem,\n            renderItem,\n            ...props\n        },\n        ref\n    ) => {\n        const [isDragOver, setIsDragOver] = React.useState(false)\n        const isSelected = selectedItemId === item.id\n        const dataSelected = isSelected ? 'true' : 'false'\n        const dataDragOver = isDragOver ? 'true' : 'false'\n\n        const onDragStart = (e: React.DragEvent) => {\n            // 默認所有項目都可以拖動，除非明確設置 draggable: false 或 disabled: true\n            if (item.draggable === false || item.disabled) {\n                e.preventDefault()\n                return\n            }\n            e.dataTransfer.setData('text/plain', item.id)\n            handleDragStart?.(item)\n        }\n\n        const onDragOver = (e: React.DragEvent) => {\n            if (item.droppable !== false && !item.disabled && draggedItem && draggedItem.id !== item.id) {\n                e.preventDefault()\n                setIsDragOver(true)\n            }\n        }\n\n        const onDragLeave = () => {\n            setIsDragOver(false)\n        }\n\n        const onDrop = (e: React.DragEvent) => {\n            if (item.disabled) return\n            e.preventDefault()\n            setIsDragOver(false)\n            handleDrop?.(item)\n        }\n\n        return (\n            <div\n                ref={ref}\n                className={cn(\n                    `flex text-left items-center py-2 before:right-1 ${rowSurfaceClasses}`,\n                    treeVariants(),\n                    className,\n                    isSelected && selectedTreeVariants(),\n                    isDragOver && dragOverVariants(),\n                    item.disabled && 'opacity-50 cursor-not-allowed pointer-events-none'\n                )}\n                style={{\n                    color: 'rgb(232, 232, 231)',\n                    width: '100%',\n                    minWidth: 0,\n                    paddingLeft: 0,\n                    paddingRight: 0,\n                    position: 'relative',\n                }}\n                data-selected={dataSelected}\n                data-drag-over={dataDragOver}\n                onClick={() => {\n                    if (item.disabled) return\n                    handleSelectChange(item)\n                    item.onClick?.()\n                }}\n                draggable={item.draggable !== false && !item.disabled}\n                onDragStart={onDragStart}\n                onDragOver={onDragOver}\n                onDragLeave={onDragLeave}\n                onDrop={onDrop}\n                {...props}\n            >\n                {renderItem ? (\n                    <>\n                        {/* 左側間距，保持固定 10px */}\n                        <div style={{ width: '10px', flexShrink: 0 }} />\n                        {/* 占位元素，代替 ChevronRight，保持對齊（20px ChevronRight + 4px margin = 24px） */}\n                        <div style={{ width: '24px', flexShrink: 0 }} />\n                        {/* renderItem 內容從固定位置開始，確保所有層級寬度一致 */}\n                        <div style={{ flex: 1, minWidth: 0, overflow: 'hidden' }}>\n                            {renderItem({\n                                item,\n                                level,\n                                isLeaf: true,\n                                isSelected,\n                                hasChildren: false,\n                            })}\n                        </div>\n                    </>\n                ) : (\n                    <>\n                        <TreeIcon\n                            item={item}\n                            isSelected={isSelected}\n                            default={defaultLeafIcon}\n                        />\n                        <span\n                            className=\"flex-grow text-sm truncate\"\n                            style={{ color: 'rgb(232, 232, 231)' }}\n                        >\n                            {item.name}\n                        </span>\n                        <TreeActions isSelected={isSelected && !item.disabled}>\n                            {item.actions}\n                        </TreeActions>\n                    </>\n                )}\n            </div>\n        )\n    }\n)\nTreeLeaf.displayName = 'TreeLeaf'\n\n// Tree-table specific TreeItem that uses custom TreeNode and TreeLeaf\ntype TreeItemProps = {\n    data: TreeDataItem[] | TreeDataItem\n    selectedItemId?: string\n    handleSelectChange: (item: TreeDataItem | undefined) => void\n    expandedItemIds: string[]\n    defaultNodeIcon?: any\n    defaultLeafIcon?: any\n    handleDragStart?: (item: TreeDataItem) => void\n    handleDrop?: (item: TreeDataItem) => void\n    draggedItem: TreeDataItem | null\n    renderItem?: (params: TreeRenderItemParams) => React.ReactNode\n    level?: number\n    className?: string\n}\n\nconst TreeItem = React.forwardRef<HTMLDivElement, TreeItemProps>(\n    (\n        {\n            className,\n            data,\n            selectedItemId,\n            handleSelectChange,\n            expandedItemIds,\n            defaultNodeIcon,\n            defaultLeafIcon,\n            handleDragStart,\n            handleDrop,\n            draggedItem,\n            renderItem,\n            level,\n            ...props\n        },\n        ref\n    ) => {\n        if (!(data instanceof Array)) {\n            data = [data]\n        }\n        return (\n            <div ref={ref} role=\"tree\" className={className} {...props}>\n                <ul>\n                    {data.map((item) => (\n                        <li key={item.id}>\n                            {item.children ? (\n                                <TreeNode\n                                    item={item}\n                                    level={level ?? 0}\n                                    selectedItemId={selectedItemId}\n                                    expandedItemIds={expandedItemIds}\n                                    handleSelectChange={handleSelectChange}\n                                    defaultNodeIcon={defaultNodeIcon}\n                                    defaultLeafIcon={defaultLeafIcon}\n                                    handleDragStart={handleDragStart}\n                                    handleDrop={handleDrop}\n                                    draggedItem={draggedItem}\n                                    renderItem={renderItem}\n                                />\n                            ) : (\n                                <TreeLeaf\n                                    item={item}\n                                    level={level ?? 0}\n                                    selectedItemId={selectedItemId}\n                                    handleSelectChange={handleSelectChange}\n                                    defaultLeafIcon={defaultLeafIcon}\n                                    handleDragStart={handleDragStart}\n                                    handleDrop={handleDrop}\n                                    draggedItem={draggedItem}\n                                    renderItem={renderItem}\n                                />\n                            )}\n                        </li>\n                    ))}\n                </ul>\n            </div>\n        )\n    }\n)\nTreeItem.displayName = 'TreeItem'\n\n// Tree-table specific TreeView that uses custom TreeItem\ntype TreeViewProps = React.HTMLAttributes<HTMLDivElement> & {\n    data: TreeDataItem[] | TreeDataItem\n    initialSelectedItemId?: string\n    onSelectChange?: (item: TreeDataItem | undefined) => void\n    expandAll?: boolean\n    defaultNodeIcon?: any\n    defaultLeafIcon?: any\n    onDocumentDrag?: (sourceItem: TreeDataItem, targetItem: TreeDataItem) => void\n    renderItem?: (params: TreeRenderItemParams) => React.ReactNode\n}\n\nconst TreeView = React.forwardRef<HTMLDivElement, TreeViewProps>(\n    (\n        {\n            data,\n            initialSelectedItemId,\n            onSelectChange,\n            expandAll,\n            defaultLeafIcon,\n            defaultNodeIcon,\n            className,\n            onDocumentDrag,\n            renderItem,\n            ...props\n        },\n        ref\n    ) => {\n        const [selectedItemId, setSelectedItemId] = React.useState<\n            string | undefined\n        >(initialSelectedItemId)\n        \n        const [draggedItem, setDraggedItem] = React.useState<TreeDataItem | null>(null)\n\n        const handleSelectChange = React.useCallback(\n            (item: TreeDataItem | undefined) => {\n                setSelectedItemId(item?.id)\n                if (onSelectChange) {\n                    onSelectChange(item)\n                }\n            },\n            [onSelectChange]\n        )\n\n        const handleDragStart = React.useCallback((item: TreeDataItem) => {\n            setDraggedItem(item)\n        }, [])\n\n        const handleDrop = React.useCallback((targetItem: TreeDataItem) => {\n            if (draggedItem && onDocumentDrag && draggedItem.id !== targetItem.id) {\n                onDocumentDrag(draggedItem, targetItem)\n            }\n            setDraggedItem(null)\n        }, [draggedItem, onDocumentDrag])\n\n        const expandedItemIds = React.useMemo(() => {\n            if (!initialSelectedItemId) {\n                return [] as string[]\n            }\n\n            const ids: string[] = []\n\n            function walkTreeItems(\n                items: TreeDataItem[] | TreeDataItem,\n                targetId: string\n            ) {\n                if (items instanceof Array) {\n                    for (let i = 0; i < items.length; i++) {\n                        ids.push(items[i]!.id)\n                        if (walkTreeItems(items[i]!, targetId) && !expandAll) {\n                            return true\n                        }\n                        if (!expandAll) ids.pop()\n                    }\n                } else if (!expandAll && items.id === targetId) {\n                    return true\n                } else if (items.children) {\n                    return walkTreeItems(items.children, targetId)\n                }\n            }\n\n            walkTreeItems(data, initialSelectedItemId)\n            return ids\n        }, [data, expandAll, initialSelectedItemId])\n\n        return (\n            <div className={cn('overflow-hidden relative', className)} style={{ backgroundColor: 'transparent', width: '100%', minWidth: 0 }}>\n                <TreeItem\n                    data={data}\n                    ref={ref}\n                    selectedItemId={selectedItemId}\n                    handleSelectChange={handleSelectChange}\n                    expandedItemIds={expandedItemIds}\n                    defaultLeafIcon={defaultLeafIcon}\n                    defaultNodeIcon={defaultNodeIcon}\n                    handleDragStart={handleDragStart}\n                    handleDrop={handleDrop}\n                    draggedItem={draggedItem}\n                    renderItem={renderItem}\n                    level={0}\n                    {...props}\n                />\n                <div\n                    className='w-full h-[48px]'\n                    onDragOver={(e) => {\n                        if (draggedItem) {\n                            e.preventDefault()\n                        }\n                    }}\n                    onDrop={(e) => {\n                        e.preventDefault()\n                        handleDrop({id: '', name: 'parent_div'})\n                    }}\n                >\n                </div>\n            </div>\n        )\n    }\n)\nTreeView.displayName = 'TreeView'\n\nexport interface TreeTableItem extends TreeDataItem {\n    children?: TreeTableItem[]\n    type?: string\n    owner?: string\n    status?: string\n    updatedAt?: string\n}\n\ntype TreeTableProps = {\n    data: TreeTableItem[]\n}\n\nconst useIsomorphicLayoutEffect =\n    typeof window !== 'undefined' ? useLayoutEffect : useEffect\n\nconst cloneTreeItem = (item: TreeTableItem): TreeTableItem => ({\n    ...item,\n    children: item.children ? item.children.map(cloneTreeItem) : undefined,\n})\n\nconst removeTreeItem = (\n    items: TreeTableItem[],\n    id: string\n): { updated: TreeTableItem[]; removed?: TreeTableItem } => {\n    let removedItem: TreeTableItem | undefined\n\n    const updatedItems: TreeTableItem[] = []\n\n    for (const item of items) {\n        if (item.id === id) {\n            removedItem = item\n            continue\n        }\n\n        let nextChildren = item.children\n        if (item.children) {\n            const childResult = removeTreeItem(item.children, id)\n            if (childResult.removed) {\n                removedItem = childResult.removed\n                nextChildren = childResult.updated.length ? childResult.updated : undefined\n            }\n        }\n\n        updatedItems.push(\n            nextChildren !== item.children ? { ...item, children: nextChildren } : item\n        )\n    }\n\n    return { updated: updatedItems, removed: removedItem }\n}\n\nconst insertTreeItem = (\n    items: TreeTableItem[],\n    targetId: string,\n    newItem: TreeTableItem\n): TreeTableItem[] => {\n    if (targetId === '') {\n        return [...items, newItem]\n    }\n\n    let inserted = false\n\n    const updated = items.map((item) => {\n        if (item.id === targetId) {\n            inserted = true\n            const children = item.children ? [...item.children, newItem] : [newItem]\n            return { ...item, children }\n        }\n\n        if (item.children) {\n            const updatedChildren = insertTreeItem(item.children, targetId, newItem)\n            if (updatedChildren !== item.children) {\n                inserted = true\n                return { ...item, children: updatedChildren }\n            }\n        }\n\n        return item\n    })\n\n    return inserted ? updated : items\n}\n\nexport function TreeTable({ data }: TreeTableProps) {\n    const [selectedItem, setSelectedItem] = useState<TreeTableItem | undefined>(undefined)\n    const [treeData, setTreeData] = useState<TreeTableItem[]>(data)\n    const [columnWidths, setColumnWidths] = useState<number[]>([\n        280,\n        140,\n        140,\n        140,\n        160,\n    ])\n    const [hasUserResized, setHasUserResized] = useState(false)\n\n    useEffect(() => {\n        setTreeData(data)\n    }, [data])\n\n    const containerRef = useRef<HTMLDivElement>(null)\n    const [containerWidth, setContainerWidth] = useState(0)\n    const [isLayoutReady, setIsLayoutReady] = useState(false)\n\n    const totalWidth = columnWidths.reduce((sum, w) => sum + w, 0)\n\n    useIsomorphicLayoutEffect(() => {\n        const node = containerRef.current\n        if (!node) {\n            return\n        }\n\n        const updateWidth = () => {\n            const next = node.getBoundingClientRect().width\n            setContainerWidth(next)\n            if (!isLayoutReady) {\n                setIsLayoutReady(true)\n            }\n        }\n\n        updateWidth()\n\n        if (typeof ResizeObserver === 'undefined') {\n            window.addEventListener('resize', updateWidth)\n            return () => window.removeEventListener('resize', updateWidth)\n        }\n\n        const observer = new ResizeObserver((entries) => {\n            const entry = entries[0]\n            if (entry) {\n                setContainerWidth(entry.contentRect.width)\n                if (!isLayoutReady) {\n                    setIsLayoutReady(true)\n                }\n            }\n        })\n\n        observer.observe(node)\n        return () => observer.disconnect()\n    }, [isLayoutReady])\n\n    const columns = [\n        {\n            key: 'name',\n            label: 'Task name',\n            widthIndex: 0,\n            isFirst: true,\n            render: (item: TreeTableItem, level: number, isSelected: boolean) => (\n                <span className={isSelected ? 'font-semibold text-neutral-50' : 'text-neutral-200'}>\n                    {item.name}\n                </span>\n            ),\n        },\n        {\n            key: 'type',\n            label: 'Type',\n            widthIndex: 1,\n            render: (item: TreeTableItem) => (\n                <span className=\"text-neutral-400\">{item.type ?? '—'}</span>\n            ),\n        },\n        {\n            key: 'owner',\n            label: 'Assigned to',\n            widthIndex: 2,\n            render: (item: TreeTableItem) => (\n                <span className=\"text-neutral-400\">{item.owner ?? '—'}</span>\n            ),\n        },\n        {\n            key: 'status',\n            label: 'Status',\n            widthIndex: 3,\n            render: (item: TreeTableItem) => {\n                const statusClass =\n                    item.status === 'Done'\n                        ? 'text-emerald-400'\n                        : item.status === 'In progress'\n                            ? 'text-sky-400'\n                            : item.status === 'Archived'\n                                ? 'text-neutral-500'\n                                : 'text-neutral-400'\n                return <span className={statusClass}>{item.status ?? '—'}</span>\n            },\n        },\n        {\n            key: 'updatedAt',\n            label: 'Last edited time',\n            widthIndex: 4,\n            render: (item: TreeTableItem) => (\n                <span className=\"text-neutral-500\">{item.updatedAt ?? '—'}</span>\n            ),\n        },\n    ]\n\n    const fillColumnIndex = columns.length - 1\n    const baseContainerWidth = containerWidth || 0\n    const effectiveWidth = useMemo(() => {\n        if (!hasUserResized) {\n            return Math.max(totalWidth, baseContainerWidth)\n        }\n        return totalWidth\n    }, [baseContainerWidth, totalWidth, hasUserResized])\n\n    const displayColumnWidths = useMemo(() => {\n        if (hasUserResized) {\n            return columnWidths\n        }\n\n        const extraWidth = Math.max(baseContainerWidth - totalWidth, 0)\n        if (extraWidth <= 0) {\n            return columnWidths\n        }\n\n        const next = [...columnWidths]\n        const fillIndex = next.length - 1\n        if (fillIndex >= 0) {\n            next[fillIndex] = next[fillIndex]! + extraWidth\n        }\n        return next\n    }, [columnWidths, baseContainerWidth, totalWidth, hasUserResized])\n\n    const leftSpacing = 10\n    const chevronSpace = 24\n    const totalLeftSpacing = leftSpacing + chevronSpace\n    const indentPerLevel = 20\n    const finalDividerInset = 8\n\n    const firstColumnBodyWidth = Math.max(\n        (displayColumnWidths[0] ?? 0) - totalLeftSpacing,\n        0\n    )\n    const renderItemTotalWidth = Math.max(effectiveWidth - totalLeftSpacing, 0)\n\n    const columnLayoutWidths = useMemo(\n        () =>\n            displayColumnWidths.map((width, index) =>\n                index === 0 ? Math.max(width - totalLeftSpacing, 0) : width\n            ),\n        [displayColumnWidths, totalLeftSpacing]\n    )\n\n    const gridTemplateColumns = useMemo(\n        () => columnLayoutWidths.map((width) => `${width}px`).join(' '),\n        [columnLayoutWidths]\n    )\n\n    const rowStyle = useMemo(\n        () =>\n            ({\n                width: `${renderItemTotalWidth}px`,\n                minWidth: `${renderItemTotalWidth}px`,\n                gridTemplateColumns,\n            }) satisfies React.CSSProperties,\n        [renderItemTotalWidth, gridTemplateColumns]\n    )\n\n    const handleColumnResizeStart = (\n        index: number,\n        e: React.MouseEvent<HTMLDivElement>\n    ) => {\n        e.preventDefault()\n        e.stopPropagation()\n\n        const startX = e.clientX\n        const initialWidths = hasUserResized ? columnWidths : displayColumnWidths\n        const startWidths = [...initialWidths]\n        const minWidth = 80\n\n        const onMouseMove = (moveEvent: MouseEvent) => {\n            const delta = moveEvent.clientX - startX\n            const next = [...startWidths]\n            const leftIndex = index\n\n            let newLeft = startWidths[leftIndex]! + delta\n            if (newLeft < minWidth) {\n                newLeft = minWidth\n            }\n\n            next[leftIndex] = newLeft\n            setColumnWidths(next)\n            if (index !== columns.length - 1) {\n                setHasUserResized(true)\n            }\n        }\n\n        const onMouseUp = () => {\n            window.removeEventListener('mousemove', onMouseMove)\n            window.removeEventListener('mouseup', onMouseUp)\n        }\n\n        window.addEventListener('mousemove', onMouseMove)\n        window.addEventListener('mouseup', onMouseUp)\n    }\n\n    const handleDrag = (sourceItem: TreeDataItem, targetItem: TreeDataItem) => {\n        if (sourceItem.id === targetItem.id) {\n            return\n        }\n\n        const { updated, removed } = removeTreeItem(treeData, sourceItem.id)\n        if (!removed) {\n            return\n        }\n\n        const itemToInsert = cloneTreeItem(removed)\n        const nextTree = insertTreeItem(updated, targetItem.id, itemToInsert)\n        if (nextTree === updated && targetItem.id !== '') {\n            setTreeData(insertTreeItem(updated, '', itemToInsert))\n        } else {\n            setTreeData(nextTree)\n        }\n    }\n\n    const renderItem = ({\n        item,\n        level,\n        isSelected,\n    }: TreeRenderItemParams) => {\n        const extended = item as TreeTableItem\n        const indentWidth = Math.max(\n            Math.min(level * indentPerLevel, Math.max(firstColumnBodyWidth - 12, 0)),\n            0\n        )\n        const firstCellPaddingLeft = indentWidth\n\n        return (\n            <div className=\"grid text-sm text-neutral-200\" style={rowStyle}>\n                {columns.map((column) => {\n                    if (column.isFirst) {\n                        return (\n                            <div\n                                key={column.key}\n                                className=\"flex items-center pr-1\"\n                                style={{\n                                    paddingLeft: `${firstCellPaddingLeft}px`,\n                                    paddingRight: '6px',\n                                }}\n                            >\n                                <span className=\"flex-1 truncate text-left text-sm text-neutral-100\">\n                                    {column.render(extended, level, isSelected)}\n                                </span>\n                            </div>\n                        )\n                    }\n\n                    return (\n                        <div\n                            key={column.key}\n                            className=\"px-3 py-2 text-left text-xs text-neutral-300 overflow-hidden text-ellipsis whitespace-nowrap\"\n                        >\n                            {column.render(extended, level, isSelected)}\n                        </div>\n                    )\n                })}\n            </div>\n        )\n    }\n\n    return (\n        <div className=\"p-8 min-h-screen\" style={{ backgroundColor: 'rgb(25, 25, 25)' }}>\n            <div\n                ref={containerRef}\n                className=\"rounded-lg p-6\"\n                style={{\n                    backgroundColor: 'rgb(37, 37, 37)',\n                    border: '1px solid rgb(47, 47, 47)',\n                    opacity: isLayoutReady ? 1 : 0,\n                    transition: 'opacity 120ms ease',\n                }}\n            >\n                <div style={{ width: '100%', overflowX: isLayoutReady ? 'auto' : 'hidden' }}>\n                    <div style={{ minWidth: `${effectiveWidth}px` }}>\n                        <div\n                            className=\"mb-1 rounded-md border border-neutral-800/60 bg-neutral-900/40 text-xs text-neutral-400\"\n                            style={{\n                                width: `${effectiveWidth}px`,\n                                minWidth: `${effectiveWidth}px`,\n                                position: 'relative',\n                                display: 'flex',\n                                alignItems: 'center',\n                            } as React.CSSProperties}\n                        >\n                            <div className=\"shrink-0\" style={{ width: `${leftSpacing}px` }} />\n                            <div className=\"shrink-0\" style={{ width: `${chevronSpace}px` }} />\n                            {columns.map((column, index) => {\n                                const columnWidth = columnLayoutWidths[column.widthIndex] ?? 0\n\n                                return (\n                                    <div\n                                        key={column.key}\n                                        className=\"relative flex items-center px-3 py-3 text-xs font-semibold text-neutral-400\"\n                                        style={{ width: columnWidth }}\n                                    >\n                                        <span className=\"font-semibold\">{column.label}</span>\n                                        {(index < columns.length - 1 || index === columns.length - 1) && (\n                                            <div\n                                                className=\"absolute top-1/2 flex h-8 w-5 -translate-y-1/2 cursor-col-resize items-center justify-center\"\n                                                style={{\n                                                    right: index === columns.length - 1 ? `${finalDividerInset}px` : '-2px',\n                                                }}\n                                                onMouseDown={(e) => handleColumnResizeStart(index, e)}\n                                            >\n                                                <div\n                                                    className=\"h-4/5 w-px opacity-50 transition-opacity hover:opacity-75\"\n                                                    style={{\n                                                        background:\n                                                            'linear-gradient(180deg, rgba(0,0,0,0.35) 0%, rgba(0,0,0,0.25) 45%, rgba(0,0,0,0.4) 100%)',\n                                                        boxShadow:\n                                                            '1px 0 0 rgba(255, 255, 255, 0.04), -1px 0 0 rgba(0, 0, 0, 0.35)',\n                                                    }}\n                                                />\n                                            </div>\n                                        )}\n                                    </div>\n                                )\n                            })}\n                        </div>\n                        <div style={{ width: `${effectiveWidth}px`, minWidth: `${effectiveWidth}px` }}>\n                            <TreeView\n                                data={treeData}\n                                onSelectChange={setSelectedItem}\n                                onDocumentDrag={handleDrag}\n                                renderItem={renderItem}\n                            />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport { TreeView }\n\n"
    },
    {
      "path": "lib/utils.ts",
      "type": "registry:lib",
      "content": "import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n"
    }
  ],
  "tailwind": {
    "config": {
      "theme": {
        "extend": {
          "keyframes": {
            "accordion-down": {
              "from": {
                "height": "0"
              },
              "to": {
                "height": "var(--radix-accordion-content-height)"
              }
            },
            "accordion-up": {
              "from": {
                "height": "var(--radix-accordion-content-height)"
              },
              "to": {
                "height": "0"
              }
            }
          },
          "animation": {
            "accordion-down": "accordion-down 0.2s ease-out",
            "accordion-up": "accordion-up 0.2s ease-out"
          }
        }
      }
    }
  },
  "cssVars": {},
  "meta": {
    "title": "Tree Table",
    "description": "A tree table component with resizable columns and Notion-style design",
    "importSpecifier": "TreeTable",
    "moduleSpecifier": "@/components/ui/tree-table"
  }
}